@inject ISudokuProvider SudokuProvider

<div class="@(_currentIsLegal ? "mark__cell mark__cell--danger" : string.Empty)"></div>

@code {
    private bool _previousIsLegal;
    private bool _currentIsLegal => !_cell.Input.IsLegal;

    private ICell _cell => SudokuProvider.Cells[X, Y];

    [Parameter]
    public int X { get; set; }

    [Parameter]
    public int Y { get; set; }

    protected override void OnInitialized()
    {
        SudokuProvider.OnValueChanged += StateHasChanged;
    }

    protected override bool ShouldRender()
    {
        return _previousIsLegal != _currentIsLegal;
    }

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
        _previousIsLegal = _currentIsLegal;
    }
}
