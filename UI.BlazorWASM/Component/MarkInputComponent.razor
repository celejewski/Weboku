@inject ISudokuProvider SudokuProvider
@inject IGridProvider GridProvider

<div class="@(_currentIsLegal ? string.Empty : "mark__cell mark__cell--danger")"></div>

@code {
    private bool _previousIsLegal;
    private bool _currentIsLegal => GridProvider.IsValueLegal(X, Y);

    [Parameter]
    public int X { get; set; }

    [Parameter]
    public int Y { get; set; }

    protected override void OnInitialized()
    {
        SudokuProvider.OnValueChanged += StateHasChanged;
    }

    protected override bool ShouldRender()
    {
        return _previousIsLegal != _currentIsLegal;
    }

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
        _previousIsLegal = _currentIsLegal;
    }
}
